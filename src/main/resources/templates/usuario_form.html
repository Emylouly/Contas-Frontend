<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criar Usuário</title>
    <link rel="stylesheet" href="/css/stylesCadastro.css"> <!-- Link para o CSS -->
</head>
<body>
    <form id="formCriarUsuario">
        <h2>Criar Novo Usuário</h2>
        
        <!-- Linha 1: Nome e E-mail -->
        <div class="form-row">
            <div class="form-group">
                <label for="nome">Nome:</label>
                <input type="text" id="nome" name="nome" required>
            </div>
            <div class="form-group">
                <label for="email">E-mail:</label>
                <input type="email" id="email" name="email" required>
            </div>
        </div>

        <!-- Linha 2: Login e CPF -->
        <div class="form-row">
            <div class="form-group">
                <label for="login">Login:</label>
                <input type="text" id="login" name="login" required>
            </div>
            <div class="form-group">
                <label for="cpf">CPF:</label>
                <input type="text" id="cpf" name="cpf" required>
            </div>
        </div>

        <!-- Linha 3: Senha -->
        <div class="form-row">
            <div class="form-group">
                <label for="senha">Senha:</label>
                <input type="password" id="senha" name="senha" required>
            </div>
        </div>

        <!-- Linha 4: Endereço - Rua e Número -->
        <div class="form-row">
            <div class="form-group">
                <label for="rua">Rua:</label>
                <input type="text" id="rua" name="rua" required>
            </div>
            <div class="form-group">
                <label for="numero">Número:</label>
                <input type="text" id="numero" name="numero" required>
            </div>
        </div>

        <!-- Linha 5: Endereço - Bairro -->
        <div class="form-row">
            <div class="form-group">
                <label for="bairro">Bairro:</label>
                <input type="text" id="bairro" name="bairro" required>
            </div>
        </div>

        <!-- Linha 6: Endereço - Cidade e Estado -->
        <div class="form-row">
            <div class="form-group">
                <label for="cidade">Cidade:</label>
                <input type="text" id="cidade" name="cidade" required>
            </div>
            <div class="form-group">
                <label for="estado">Estado:</label>
                <input type="text" id="estado" name="estado" required>
            </div>
        </div>

        <!-- Linha 7: Endereço - CEP -->
        <div class="form-row">
            <div class="form-group">
                <label for="cep">CEP:</label>
                <input type="text" id="cep" name="cep" required>
            </div>
        </div>

        <!-- Linha 8: Telefone - Número e Tipo -->
        <div class="form-row">
            <div class="form-group">
                <label for="telefonenumero">Número do Telefone:</label>
                <input type="text" id="telefonenumero" name="telefonenumero" required>
            </div>
            <div class="form-group">
                <label for="tiponumero">Tipo do Telefone:</label>
                <input type="text" id="tiponumero" name="tiponumero" required>
            </div>
        </div>

        <!-- Botão de submit -->
        <div class="form-row">
            <button type="submit">Criar Usuário</button>
        </div>

        <!-- Link para voltar -->
        <a href="/">Voltar para a página inicial</a>
    </form>

    <script>
        document.getElementById("formCriarUsuario").addEventListener("submit", function (e) {
            e.preventDefault(); // Evita o recarregamento da página

            const usuario = {
                nome: document.getElementById("nome").value,
                cpf: document.getElementById("cpf").value,
                email: document.getElementById("email").value,
                login: document.getElementById("login").value,
                senha: document.getElementById("senha").value,
                estado: document.getElementById("estado").value,
                cidade: document.getElementById("cidade").value,
                bairro: document.getElementById("bairro").value,
                rua: document.getElementById("rua").value,
                numero: document.getElementById("numero").value,
                cep: document.getElementById("cep").value,
                telefonenumero: document.getElementById("telefonenumero").value, // Campo de telefone
                tiponumero: document.getElementById("tiponumero").value // Tipo do telefone
            };

            fetch("http://localhost:8081/usuario/criar", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(usuario)
            })
            .then(response => {
                if (response.ok) {
                    alert("Usuário criado com sucesso!");
                    window.location.href = "/"; // Redireciona para a lista de usuários
                } else {
                    response.json().then(data => {
                        alert("Erro: " + data); // Exibe a mensagem de erro do backend
                    });
                }
            })
            .catch(error => {
                console.error("Erro ao enviar dados:", error);
                alert("Erro ao conectar com o servidor.");
            });
        });
    </script>
</body>
</html>